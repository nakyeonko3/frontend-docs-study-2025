# [State 를 사용해 Input 다루기](https://ko.react.dev/learn/reacting-to-input-with-state)

## 선언형 UI와 명령형 UI 비교

> 선언형은 어떻게(how)보다는 무엇을(what)에 집중한다. 

- 명령형 UI
	- **UI를 구성하는 절차를 하나하나씩 지시(명령)하는** 방식이다.
	- 개발자가 직접 DOM을 조작하거나 변경하는 코드를 하나씩 전부다 작성해야 한다. (예,`document.createElement, appendChild, innerText`) 
	- 단순한 화면에서는 문제가 없지만, 관리해야된 상태가 늘어나게 되면 **코드 복잡도가 크게 증가한다.**

- 선언형 UI
	- **UI가 어떤 상태로 보여야 될지를 선언하는 방식**이다.
	- 개발자는 상태(state)에 따라 어떤 화면을 보여야하는지 과정들을 명시하지 않고 결과에만 집중하면 된다. DOM을 조작하고 변경하는 부분은 라이브러리(또는 프레임워크)가 담당한다.
	- 관리해야 될 상태가 늘어난다 하더라도 명령형 UI에 비해서는 **복잡도가 크게 증가하지 않는다.**
	- 개발자는 상태 관리와 해당 상태에 대한 UI만 정의하면 되기 때문에, **인지부하가 감소한다.**


## UI를 선언적인 방식으로 생각하기
선언적인 방식으로 React에서 UI 구현하는 과정
1. 컴포넌트의 다양한 시각적 state 확인
2. 무엇이 state 변화를 트리거하는지 알아내기
3. `useState`를 사용해서 메모리의 `state`를 표현
4. 불필요한 `state` 변수를 제거
5. `state` 설정을 위해 이벤트핸들러를 연결


## 1. 컴포넌트의 다양한 시각적 state 확인
- 사용자가 볼 수 있는 UI의 모든 state를 시각화하는 과정이다.
	- 오류, 작성중, 성공에 대한 모든 state들을 일단 모두 시각화 해야 한다.
	- ex) 폼에 대한 상태 값은 다음과 같을 수 있다. Error(에러), Submitting(폼 제출), Typing(작성중)
- 유한 상태 기계(Finite-state machine, FSM)
	- 유한 상태 기계는 어떠한 사건(Event)에 의해 한 상태에서 다른 상태로 변화할 수 있으며, 이를 전이(Transition)이라 한다 
	- 아래 그림에서는 광부의 상태를 순서도로 표현한 그림이다. 여기서 광부가 특정 사건(Event)마다 다른 상태로 전이(Transition)되는 걸 볼 수 있다.</br>
![|300](https://i.imgur.com/YSMX0bI.png)


## 2. 무엇이 state 변화를 트리거하는지 알아내기
- 어떤 걸로 인해 상태(state)가 또 다른 상태로 전이되는 확인하는 과정이다.
	- 예) 사용자가 폼을 제출하고 네트워크 요청이 실패하면 반드시 Error 상태로 변해야 된다.
- 순서도를 그려서 시작화 하면 구현하기 전에 state 변화 흐름을 파악하고, 버그를 찾아낼 수 있다.


## 3. `useState`를 사용해서 메모리의 `state`를 표현
- 이전 단계에서 만든 시각적 state를 `useState`를 이용해서 표현하는 과정이다.
- 상태는(`state`)는 적을 수록 좋다.
- 불필요한  state가 많으면 어떻게 될까?
	- 불필요한 리렌더링이 증가한다
	- `state`간 동기화가 어려워져 버그 가능성이 증가 한다.
	- 디버깅도 어려워 진다.

##  4. 불필요한 `state` 변수를 제거

- 중복을 피하고 필수적은 `state`만을 남기기 위한 과정

- 아래 조건들을 만족하면 state로 만드는 것이 좋다.
	- 다른 props나 state로 계산할 수 없는 값이다.
	- 상태(state) 간에 논리적 모순이 발생하지 않는다.


- isTyping은 현재 사용자가 텍스트 인풋을 변경 중인지 아닌지 여부 나타내기 위한 상태고, </br> isSubmitting은 제출 버튼을 클릭하고 네트워크 응답을 기다리고 있는지 확인하기 위해 만든 상태다.
- 이 둘이 동시에 참일 수는 없다.
```jsx
const [isTyping, setIsTyping] = useState(false);
const [isSubmitting, setIsSubmitting] = useState(false);
```


### 5. `state` 설정을 위해 이벤트핸들러를 연결

- state 변수와 이벤트 헨들러와 연결하기
- 사용자의 입력을 처리하기 위해서는 이벤트 헨들러가 필요하다.

---

다음: [State 구조 선택하기](02-state-structure.md)
